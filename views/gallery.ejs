<div class="row" id="gallery-page">
  <div class="col-md-12">
    <div id="freewall"></div>
  </div>
</div>

<script type="text/javascript">
  $(function() {

    var temp = "<div class='brick shadow' style='width:{width}px;'><img src='images/gallery/{index}.jpg' width='100%'></div>";
    var w = 1;
    var h = 1;
    var html = '';
    var limitItem = 55;
    for (var i = 0; i < limitItem; ++i) {
      w = 1 + 3 * Math.random() << 0;
      html += temp.replace(/\{width\}/g, w * 150).replace("{index}", i + 1);
    }
    $("#freewall").html(html);

    var wall = new Freewall('#freewall');
    wall.reset({
      selector: '.brick',
      animate: true,
      cellW: 300,
      cellH: 'auto',
      onResize: function() {
        wall.fitWidth();
      }
    });

    var images = wall.container.find('.brick');
    images.find('img').load(function() {
      wall.fitWidth();
    });

    wall.fitWidth();
  });
</script>

<script async defer data-pin-hover="true" data-pin-save="true" src="//assets.pinterest.com/js/pinit.js"></script>